(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{"110":function(e,t,n){"use strict";var o=n(4),a=n(7),i=n(116),c=n(5),r=n(114),s=n(32),u={};var j={"get":function get(e,t){return u[e]||t},"getData":function getData(){return u},"init":function init(){!function createClientId(){var e=Math.floor(15*Math.random())||64;return u.clientId=e,e}(),function initializeDevice(){"object"==Object(c.a)(s.default)&&(Object(s.getNetworkType)({"success":function success(e){u.networkType=e.networkType}}),Object(s.getSystemInfo)({"success":function success(e){"getSystemInfo:ok"==e.errMsg&&(u.language=e.language,u.version=e.version,u.model=e.model,u.pixelRatio=e.pixelRatio,u.windowWidth=e.windowWidth,u.windowHeight=e.windowHeight,u.system=e.system,u.platform=e.platform,u.ver=e.SDKVersion)}}))}(),function initClientData(){"object"==("undefined"==typeof core?"undefined":Object(c.a)(core))&&(u.appID=r.a.appID||"")}()}},O=n(118),l=function(){function Client(e){Object(o.a)(this,Client),j.init()}return Object(a.a)(Client,[{"key":"isLogin","value":function isLogin(){}},{"key":"getClientId","value":function getClientId(){return j.get("clientId")}},{"key":"getClientInfo","value":function getClientInfo(){return j.getData()}},{"key":"getUserInfo","value":function getUserInfo(){return i.a.getItem("userInfo")}},{"key":"setUserInfo","value":function setUserInfo(e){return!0}},{"key":"saveFootPrint","value":function saveFootPrint(e){var t={"name":e,"time":O().format()},n=[],o=i.a.getItem("__footprint__");o?((n=JSON.parse(o)).lenght>=30&&n.shift(),n.push(t)):n.push(t);var a=JSON.stringify(n);i.a.setItem("__footprint__",a)}},{"key":"getFootPrint","value":function getFootPrint(){var e=[],t=i.a.getItem("__footprint__");return console.log("old history....",t),t&&(e=JSON.parse(t)),console.log("get visit history",e),e}},{"key":"cleanFootPrint","value":function cleanFootPrint(){return i.a.removeItem("__footprint__"),!0}}]),Client}();t.a=new l},"112":function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var o=n(15),a=n.n(o),i=n(17),c=n(6),r=n(4),s=n(7),u=n(8),j=n(32),O=200,l=301,T=403,f=404,g=500,H=502,d=n(113),b=n(110),h="https://api.zhangyongqiao.com";console.log("Gateway===>"+h);var m=function(){function Model(e){Object(r.a)(this,Model),Object(u.a)(this,"bizPath",void 0),Object(u.a)(this,"processUnauthentication",(function(e){j.default.navigateTo({"url":"/pages/user/login/index"})})),null!=e&&e.bizPath&&(this.bizPath=e.bizPath)}var e;return Object(s.a)(Model,[{"key":"saveToken","value":function saveToken(e){Object(j.setStorageSync)("token",e)}},{"key":"checkResponse","value":function checkResponse(e){return e.statusCode===f?Object(d.b)("api","请求资源不存在"):e.statusCode===H?Object(d.b)("api","服务端出现了问题"):e.statusCode===T?Object(d.b)("api","没有权限访问"):e.statusCode===l?(this.processUnauthentication(e),Object(d.b)("api","请先登录")):e.statusCode===g?Object(d.b)("api","服务异常"):e.statusCode!==O||e.data}},{"key":"clearToken","value":function clearToken(){Object(j.removeStorageSync)("token")}},{"key":"getToken","value":function getToken(){return Object(j.getStorageSync)("token")}},{"key":"composeFullUrl","value":function composeFullUrl(e){var t=h;return this.bizPath?t=t+this.bizPath+e:t+=e,t}},{"key":"fetch_get","value":function fetch_get(e,t){var n=this,o=this,a=Object(c.a)({"cid":b.a.getClientId()},t);return new Promise((function(t,i){Object(j.request)({"url":n.composeFullUrl(e),"header":{"Content-Type":"application/json","token":n.getToken()},"data":a,"method":"get","success":function success(e){o.checkResponse(e)?t(e.data.data):i(e.data)},"fail":function fail(e){Object(d.b)("get","网络异常"),i(e),Object(j.showToast)({"title":"接口异常","icon":"error","duration":2e3})}})}))}},{"key":"fetch_post","value":(e=Object(i.a)(a.a.mark((function _callee(e,t,n){var o,i=this;return a.a.wrap((function _callee$(n){for(;;)switch(n.prev=n.next){case 0:return o={"params":t,"head":{"cid":b.a.getClientId()}},n.abrupt("return",new Promise((function(t,n){Object(j.request)({"url":i.composeFullUrl(e),"header":{"Content-Type":"application/json","token":i.getToken()},"data":o,"method":"post","success":function success(e){t(e.data)},"fail":function fail(e){console.log("request exception......",e),n(e),Object(j.showToast)({"title":"接口异常","icon":"error","duration":2e3})}})})));case 3:case"end":return n.stop()}}),_callee,this)}))),function fetch_post(t,n,o){return e.apply(this,arguments)})}]),Model}()},"113":function(e,t,n){"use strict";n.d(t,"b",(function(){return c})),n.d(t,"a",(function(){return r}));var o=n(5),a=(n(32),function formatNumber(e){return(e=e.toString())[1]?e:"0"+e}),i=function formatTime(e){var t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),i=e.getHours(),c=e.getMinutes(),r=e.getSeconds();return[t,n,o].map(a).join("-")+" "+[i,c,r].map(a).join(":")},c=function logError(e,t,n){n||(n="empty"),"object"===Object(o.a)(n)&&(n=JSON.stringify(n));var a=i(new Date);console.error(a,e,t,n)},r=function logDebug(e,t,n){n||(n="empty"),"object"===Object(o.a)(n)&&(n=JSON.stringify(n));var a=i(new Date);console.error(a,e,t,n)}},"114":function(e,t,n){"use strict";t.a={"appId":"10030","systemCode":"mini-program","version":"v_1.0.1","env":"dev","host":"m.ctrip.com","uat":"uat.m.zhangyongqiao.com","fat":"uat.m.zhangyongqiao.com"}},"116":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var o=n(4),a=n(7),i=n(32),c=function(){function ClientStorage(){Object(o.a)(this,ClientStorage)}return Object(a.a)(ClientStorage,null,[{"key":"setItem","value":function setItem(e,t){Object(i.setStorageSync)(e,t)}},{"key":"getItem","value":function getItem(e){return Object(i.getStorageSync)(e)}},{"key":"removeItem","value":function removeItem(e){Object(i.removeStorageSync)(e)}},{"key":"saveToken","value":function saveToken(e){Object(i.setStorageSync)("token",e)}},{"key":"clearToken","value":function clearToken(){Object(i.removeStorageSync)("token")}},{"key":"getToken","value":function getToken(){return Object(i.getStorageSync)("token")}}]),ClientStorage}()},"117":function(e,t,n){"use strict";var o=n(6),a=n(4),i=n(7),c=n(8),r=n(32),s=function(){function PageRouter(){Object(a.a)(this,PageRouter),Object(c.a)(this,"$instance",r.default.getCurrentInstance()),r.default.getCurrentInstance().router.params}return Object(i.a)(PageRouter,[{"key":"gotoPage","value":function gotoPage(e){null!=e&&e.url&&r.default.navigateTo(Object(o.a)({},e))}},{"key":"getParams","value":function getParams(){return this.$instance.router.params}}]),PageRouter}();t.a=new s},"119":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var o=n(4),a=n(8),i=n(112),c=(n(114),n(110)),r=function UbtClient(e){var t=this;Object(o.a)(this,UbtClient),Object(a.a)(this,"send",(function(e,t){return t.type=e,t.clientInfo=c.a.getClientInfo(),new i.a({"bizPath":"/common-service/ubt"}).fetch_post("/ubt-bg.gif",t,{})})),Object(a.a)(this,"ubtTrace",(function(e){t.send("TRACE",e)})),Object(a.a)(this,"ubtDevTrace",(function(e){t.send("DEV_TRACE",e)})),Object(a.a)(this,"ubtMetric",(function(e){t.send("Metric",e)})),Object(a.a)(this,"ubtExposure",(function(e){t.send("EXPOSURE",e)})),Object(a.a)(this,"ubtSendPV",(function(e){t.send("PV",e)}))}},"123":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var o=n(4),a=n(7),i=n(16),c=n(12),r=n(13),s=n(8),u=n(32),j=function(){function PageHelper(){Object(o.a)(this,PageHelper)}return Object(a.a)(PageHelper,null,[{"key":"showToast","value":function showToast(e){Object(u.showToast)(e)}}]),PageHelper}(),O=n(117),l=n(19),T=n(119),f=n(113),g=n(110),H=new T.a,d=function(e){Object(c.a)(BasePage,e);var t=Object(r.a)(BasePage);function BasePage(){var e;return Object(o.a)(this,BasePage),e=t.call(this),Object(s.a)(Object(i.a)(e),"gotoPage",(function(e){O.a.gotoPage(e)})),Object(s.a)(Object(i.a)(e),"showToast",(function(e,t){j.showToast(e,t)})),Object(s.a)(Object(i.a)(e),"sendPV",(function(){e.pageId&&H.ubtSendPV({"pageId":e.pageId})})),Object(s.a)(Object(i.a)(e),"saveFootPrint",(function(){e.pageName&&g.a.saveFootPrint(e.pageName)})),Object(s.a)(Object(i.a)(e),"ubtTrace",(function(e,t){H.ubtTrace(e,t)})),Object(s.a)(Object(i.a)(e),"ubtMetric",(function(){H.ubtMetric(key,value)})),Object(s.a)(Object(i.a)(e),"debugInfo",(function(e,t){Object(f.a)(e,t)})),e}return Object(a.a)(BasePage,[{"key":"componentDidMount","value":function componentDidMount(){this.sendPV(),this.saveFootPrint()}},{"key":"componentDidShow","value":function componentDidShow(){this.saveFootPrint()}},{"key":"routerParams","value":function routerParams(){O.a.getParams()}}]),BasePage}(l.Component)},"159":function(e,t,n){},"160":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAACE1BMVEX////TOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjHTOjFxrkw8AAAAsHRSTlMAAP35/h7zd/zkIAcdrLkkIgYCTngVCfansYxapqVVwvhUq7hi8ujwW+oNA1YPdqS9sNdX0idYywwEqGvDrhxuiPqh9G/glts71PcfZarmyrphPsUxU8DjCsYLYCYWczU2IVmvinEa++wIXa1ckToTaEq1joHhQWwpgO1flTnihO80GD207hK75xkXtsnd1jf1ogGFMxt1I0BDUJtwz9+eQnSNEdEUebO+bZy3BWqg6ZyOD6cAAAKsSURBVEjH7dZVW+NAFAbgnCRV2tKWChR3Z3F3FrfFHdbd3d3d3d33+4l7QdlNMg0M3MK5mzzzJpMzM2dGEFZiWQYRkdPjGEkwFiZ71hETC2BDjIhgiDGGxeGIVDTYtzvDso7utDfAuH4xeLWIqPC5nuFRkDfx4yJZNCn7mkS5iBcbjDii/lIVjAZOHAu7NkNJiOTDnaJk02KbJHZyYRNi2JldBRMXTkYci+OwhgtbYGWxFRYunIAwFodB4sRZS8cWlCx92I5QCUvkTJgJsUufKmuIRVIriVa+5RmJHVps512egsGIPLU18W8MoVQ2q3SeWS4lIiq/Ge/iKgYb/heDGsjTRERUCTzgK0NSd4bV5bJmJEkwRhMRUR2MZvNangK4X/5XACNn/3e3JCduRKFvIeyrKp6FssXhcc6O3juCA7StHe/nx+6uNOD4vZQZr2KHZOcj/ifRuS3ihfmwoRooG1LvLPdhO65eIyI6iEN7N+va/q3oyVHJ+6d29QBSPxERucoAceDxk5B2nx8X9yjpZP1rAK1nJoPt8RMFfgAfjzkZ29aBk25BidOB04EZ1VDGE2PPAplaez4NLcGDbi4acSnEWXU5DY3sXr6SrcGufBTnMrgS7aMam4PM64IGk7cVN7I1uA7pJRpbcQspAoMpPBMt6idtkjykHXQ0brtDYLpzFx5le8qCAJPqYfQJoTBFmOWHqpoUX6G1j8SmrNCYoqBcN2N4yny4DwWCDs7HM9WrnjP4BV7q4VcYVLTeBPOqjAG81cMWKAtqAO8Y3AynHu6Aj4g+TEx8IiL6jHoGpyNXB4/CT+UZXyTA/PWbjbrwncEi3DrYhtRuP2B2/JAAubcANQwGBB08CECs/jVFlBud1ARgmL0SjOlhb3PvdO1cwxfx+09g5Yq93OIvYsC1wuSjbLgAAAAASUVORK5CYII="},"161":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAA2UExURUxpcdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MdM6MQreAPwAAAARdFJOUwCx7fMIFPvUMY4ngFU+m72j6PtqmQAAAVVJREFUSMftlslyxCAMRI1YBHib/v+fDVWpJB5oGya+WjeWB40ASdP02GP/NLfORiUEUTOv7iM0boKDyRbHUVMATUv0zvm4JC1NM4a7FGBTPnblZBHSgPisZZ6ve31ZUXNXskCpwqiQjvRoYU7kOQN7SWfB69je92PrBblQ7hTmrQN4axrouddSPVjBZfF0euAQqkNVMJlxUFWvW8NFmznZGNb3YG/Bt97aAzVw2XqjrhbkPpwhzOErdOrDk2Il8EyugcAJM/X1MgIv1N9K/EjgSE43TQI/AnsIgQPcCOwQhmE/BjPZCvVDspnDfEtzh7GrIjS/qpn+1Ybmj2SlehqaP0/2MVo6w7rBL/lL974kCwY/9N4NBtN+Ht7+Nt6HA+AnM9JVXO6E3jboN+/oavE63bzbdbq5l+jupdh7yf27rJC6rJCxsuJeQXOzlLpZxD322MG+AOMYEa+Q8KoiAAAAAElFTkSuQmCC"},"174":function(e,t,n){"use strict";n.r(t),n.d(t,"default",(function(){return H}));var o=n(4),a=n(7),i=n(16),c=n(12),r=n(13),s=n(8),u=(n(19),n(115)),j=n(32),O=n(110),l=(n(139),n(124),n(123)),T=n(116),f=new(function(){function ClientUser(e){Object(o.a)(this,ClientUser)}return Object(a.a)(ClientUser,[{"key":"isLogin","value":function isLogin(){return!!this.getUserInfo()}},{"key":"getUserInfo","value":function getUserInfo(){var e=T.a.getItem("__USER_INFO__");return e?JSON.parse(e):e}},{"key":"saveUserInfo","value":function saveUserInfo(e){return T.a.setItem("__USER_INFO__",JSON.stringify(e)),!0}},{"key":"obtainUserInfo","value":function obtainUserInfo(){var e=this;return new Promise((function(t,n){j.default.getUserProfile({"desc":"用于完善会员资料","success":function success(n){console.log("user info....",n.userInfo),e.saveUserInfo(n.userInfo),t(n.userInfo)},"fail":function fail(e){console.log("failed to obtain wechat userinfo..."),n(e)}})}))}}]),ClientUser}()),g=(n(159),n(109)),H=function(e){Object(c.a)(Index,e);var t=Object(r.a)(Index);function Index(e){var n;return Object(o.a)(this,Index),n=t.call(this,e),Object(s.a)(Object(i.a)(n),"onLogin",(function(){f.obtainUserInfo().then((function(e){console.log(e);var t="女";0===e.gender&&(t="男"),n.setState({"userInfo":e,"isLogin":!0,"avatarUrl":e.avatarUrl,"nickname":e.nickName,"gender":t})}))})),Object(s.a)(Object(i.a)(n),"signIn",(function(){n.gotoPage({"url":"/pages/user/login/index"}),console.log("gotopage.....")})),Object(s.a)(Object(i.a)(n),"goPage",(function(e){console.log("test gotopage"),n.gotoPage({"url":"/pages/history/index"})})),n.state={"avatarUrl":"https://gw.alipayobjects.com/zos/rmsportal/BiazfanxmamNRoxxVxka.png","nickname":"匿名用户","gender":"","userInfo":f.getUserInfo(),"isLogin":f.isLogin(),"searchValue":""},n}return Object(a.a)(Index,[{"key":"componentDidMount","value":function componentDidMount(){console.log("Did Show in  DidMount....")}},{"key":"componentWillUnmount","value":function componentWillUnmount(){console.log("Did Show in  WillUnMount....")}},{"key":"componentDidShow","value":function componentDidShow(){console.log("Did Show in ...."),O.a.isLogin()}},{"key":"componentDidHide","value":function componentDidHide(){}},{"key":"signOut","value":function signOut(e){Object(j.showToast)({"title":"正在开发中，敬请期待","icon":"none"})}},{"key":"render","value":function render(){return Object(g.jsxs)(u.r,{"className":"page","children":[Object(g.jsx)(u.r,{"className":"header","children":Object(g.jsxs)(u.r,{"className":"header__left","children":[Object(g.jsx)(u.c,{"src":this.state.avatarUrl,"className":"header__img"}),Object(g.jsxs)(u.r,{"className":"header__info","children":[Object(g.jsx)(u.r,{"className":"header__info__name","children":this.state.nickname}),!this.state.isLogin&&Object(g.jsx)(u.r,{"onClick":this.onLogin.bind(this),"children":Object(g.jsx)(u.p,{"className":"header__info__level","children":"微信授权登录"})})]})]})}),Object(g.jsx)(u.r,{"className":"user_count"}),Object(g.jsxs)(u.r,{"className":"user_brief","children":[Object(g.jsxs)(u.r,{"className":"user_brief__item","children":[Object(g.jsx)(u.c,{"className":"user_brief__item__img","src":n(160)}),Object(g.jsxs)(u.r,{"className":"user_brief__item__text","children":[Object(g.jsx)(u.p,{"children":"性别:"}),Object(g.jsx)(u.p,{"children":this.state.gender})]})]}),Object(g.jsxs)(u.r,{"className":"user_brief__item","children":[Object(g.jsx)(u.c,{"className":"user_brief__item__img","src":n(161)}),Object(g.jsxs)(u.r,{"className":"user_brief__item__text","onClick":this.goPage.bind(this,"recentPlay"),"children":[Object(g.jsx)(u.p,{"children":"最近浏览"}),Object(g.jsx)(u.p,{"className":"at-icon at-icon-chevron-right"})]})]})]}),Object(g.jsx)(u.r,{"className":"page page-index"})]})}}]),Index}(l.a)}}]);